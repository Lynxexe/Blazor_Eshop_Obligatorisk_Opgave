@page "/cart"
@using Blazor_Eshop_Obligatorisk_Opgave.Client.Pages.ShopComponents
@using EshopSharedLibrary.Interface
@using EshopSharedLibrary.Model.ShoppingCart
@using EshopSharedLibrary.Model.ShoppingCartModel
@using EshopSharedLibrary.Model
@inject IShoppingCartService shoppingCartService
@rendermode InteractiveAuto

<h3>Cart</h3>

<div id="vue-cart" class="quenched">
    <main class="margin-horizontal:auto max-width:container padding-horizontal:32">
        <div>
            <h1 class="font-weight:500 @@mq-960--margin-bottom:24 color:blue-265f8e font-size:36 line-height:1_222 margin-bottom:12 margin-top:24"></h1>
            <div class="display:flex flex-direction:column color:blue-265f8e margin-bottom:12">
                <TableTemplate HeaderNames="@TableHeaderNames">
                    <RowTemplate>
                        @if (shoppingCart?.ItemsInCart != null)
                        {
                            @foreach (var item in shoppingCart.ItemsInCart)
                            {
                                <CartItem Item="item"></CartItem>
                            }
                        }
                    </RowTemplate>
                </TableTemplate>
            </div>
        </div>
    </main>
</div>
@code {
    private List<TableHeaderName> TableHeaderNames = new() {
        new TableHeaderName("Product", 2),
        new TableHeaderName("Price", 1),
        new TableHeaderName("Quantity", 1),
        new TableHeaderName("Total", 1),
        new TableHeaderName("Remove", 1)
    };

    private ShoppingCart shoppingCart { get; set; }

    protected override void OnInitialized()
    {
        shoppingCart = shoppingCartService.Get();
    }
}
